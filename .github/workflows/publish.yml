name: Publish Workflow

on: push

jobs:
  force-fail:
    runs-on: ubuntu-latest
    steps:
      - name: Check input and force failure if needed
        run: |
          echo "Checking input..."
          if [ "${{ github.event.inputs.force_fail }}" = "true" ]; then
            echo "Input is true. Forcing the workflow to fail."
            exit 1
          else
            echo "Input is false. Workflow will succeed."
          fi

  deploy:
    uses: ./.github/workflows/deploy-storybook.yml
    needs: force-fail
    # if: ${{ github.event.inputs.package == 'accomfe-ui' }}
    with:
      checkout_branch: 'main'
    # permissions:
    #   contents: read
    #   pages: write
    #   id-token: write